{
  "name": "Telegram Daily News Feed 2025-12-22",
  "nodes": [
    {
      "parameters": {
        "jsCode": "// è¼¸å‡ºæ‰€æœ‰ RSS ä¾†æºï¼Œæ¯å€‹éƒ½æ˜¯ç¨ç«‹çš„ item\nconst sources = [\n  // ğŸ”¥ é ­æ¢ç„¦é» (å·²ç§»é™¤è¯åˆ)\n  { category: 'ğŸ”¥ é ­æ¢ç„¦é»', mySource: 'ä¸­å¤®ç¤¾æ”¿æ²»', url: 'https://feeds.feedburner.com/rsscna/politics' },\n  \n  // ğŸŒ åœ‹éš›è²¡ç¶“ (å·²ç§»é™¤è¯åˆ)\n  { category: 'ğŸŒ åœ‹éš›è²¡ç¶“', mySource: 'ä¸­å¤®ç¤¾åœ‹éš›', url: 'https://feeds.feedburner.com/rsscna/intworld' },\n  { category: 'ğŸŒ åœ‹éš›è²¡ç¶“', mySource: 'ä¸­å¤®ç¤¾è²¡ç¶“', url: 'https://feeds.feedburner.com/rsscna/finance' },\n  \n  // ğŸ’» ç§‘æŠ€æ–°çŸ¥\n  { category: 'ğŸ’» ç§‘æŠ€æ–°çŸ¥', mySource: 'iThome', url: 'https://www.ithome.com.tw/rss' },\n  { category: 'ğŸ’» ç§‘æŠ€æ–°çŸ¥', mySource: 'TechNews', url: 'https://technews.tw/tn-rss/' },\n  { category: 'ğŸ’» ç§‘æŠ€æ–°çŸ¥', mySource: 'Inside', url: 'https://www.inside.com.tw/feed/rss' },\n  \n  // ğŸ‘® ç¤¾æœƒèˆ‡ç”Ÿæ´»\n  { category: 'ğŸ‘® ç¤¾æœƒç”Ÿæ´»', mySource: 'ä¸­å¤®ç¤¾ç”Ÿæ´»', url: 'https://feeds.feedburner.com/rsscna/lifehealth' },\n  { category: 'ğŸ‘® ç¤¾æœƒç”Ÿæ´»', mySource: 'ETtoday ç¤¾æœƒ', url: 'https://feeds.feedburner.com/ettoday/society' }\n];\n\nreturn sources.map(src => ({ json: src }));"
      },
      "name": "è¨­å®šæ–°èä¾†æº",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -80,
        144
      ],
      "id": "2bf197a3-898b-4d49-a95c-04edf629ecaf"
    },
    {
      "parameters": {
        "url": "={{ $json.url }}",
        "options": {
          "response": {
            "response": {
              "responseFormat": "text"
            }
          },
          "timeout": 10000
        }
      },
      "name": "ä¸¦è¡ŒæŠ“å– RSS",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        144,
        64
      ],
      "executeOnce": false,
      "retryOnFail": false,
      "id": "5cbf66f6-63f9-48cd-a90f-13387d832b0e",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineByPosition",
        "options": {}
      },
      "name": "åˆä½µåŸå§‹è³‡æ–™",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3,
      "position": [
        368,
        144
      ],
      "id": "aa8888a9-063a-4046-8388-4b4dc2f1bc47"
    },
    {
      "parameters": {
        "jsCode": "// è§£æ XML ä¸¦æ•´ç†æˆ Telegram è¨Šæ¯æ ¼å¼\n// æ­¤æ™‚ items åŒ…å«ä¾†è‡ª Merge ç¯€é»çš„è³‡æ–™ï¼ŒåŒ…å«åŸå§‹ category/mySource å’Œ HTTP å›æ‡‰\nconst grouped = {};\n\nfor (const item of items) {\n  const data = item.json;\n  \n  // å¾åŸå§‹è³‡æ–™ç²å– category å’Œ mySource\n  const category = data.category || 'æœªåˆ†é¡';\n  const mySource = data.mySource || 'æœªçŸ¥';\n  \n  // å¾ HTTP å›æ‡‰ç²å– XML å…§å®¹\n  const xmlContent = data.data || '';\n  \n  if (!xmlContent || xmlContent.length < 100) continue;\n  \n  if (!grouped[category]) grouped[category] = [];\n  \n  // ä½¿ç”¨æ­£å‰‡è§£æ XML\n  const itemMatches = xmlContent.match(/<item[^>]*>([\\s\\S]*?)<\\/item>/gi) || [];\n  \n  let count = 0;\n  for (const itemXml of itemMatches) {\n    if (count >= 5) break; // æ¯å€‹ä¾†æºæœ€å¤šæŠ“ 5 å‰‡ (ä¾‹å¦‚ iThome æŠ“ 5 å‰‡ï¼ŒTechNews æŠ“ 5 å‰‡...)\n    \n    // æå–æ¨™é¡Œ\n    const titleMatch = itemXml.match(/<title[^>]*>(?:<!\\[CDATA\\[)?([^<\\]]*?)(?:\\]\\]>)?<\\/title>/i);\n    let title = titleMatch ? titleMatch[1].trim() : '';\n    if (!title || title.length < 2) continue;\n    \n    // æ¸…ç†æ¨™é¡Œä¸­çš„ Markdown ç‰¹æ®Šå­—å…ƒ (Telegram MarkdownV2 éœ€è¦è·³è„«)\n    // ç°¡å–®æš´åŠ›è™•ç†ï¼šæŠŠæ–¹æ‹¬è™Ÿæ›æˆåœ“æ‹¬è™Ÿï¼ŒæŠŠåº•ç·šæ›æˆé€£å­—è™Ÿï¼Œæ˜Ÿè™Ÿæ›æˆ x\n    title = title.replace(/\\[/g, '(').replace(/\\]/g, ')').replace(/_/g, '-').replace(/\\*/g, 'x');\n    \n    // æå–é€£çµ\n    const linkMatch = itemXml.match(/<link[^>]*>([^<]*)<\\/link>/i) || \n                      itemXml.match(/href=[\"']([^\"']+)[\"']/i);\n    const link = linkMatch ? linkMatch[1].trim() : '#';\n    \n    grouped[category].push({\n      title: title.substring(0, 80), // æ¨™é¡Œéé•·æˆªæ–·\n      link: link,\n      source: mySource\n    });\n    count++;\n  }\n}\n\n// === çµ„è£æˆå–®ä¸€æ¢é•·è¨Šæ¯ ===\nlet finalMessage = `ğŸ“° *${new Date().toISOString().split('T')[0]} æ¯æ—¥æ–°èå¿«å ±* \\n\\n`;\n\n// å®šç¾©åˆ†é¡çš„é¡¯ç¤ºé †åº\nconst categoryOrder = ['ğŸ”¥ é ­æ¢ç„¦é»', 'ğŸŒ åœ‹éš›è²¡ç¶“', 'ğŸ’» ç§‘æŠ€æ–°çŸ¥', 'ğŸ‘® ç¤¾æœƒç”Ÿæ´»'];\n\n// ä¾ç…§é †åºæˆ–é è¨­é †åºè™•ç†\nconst categoriesToProcess = categoryOrder.filter(c => grouped[c])\n  .concat(Object.keys(grouped).filter(c => !categoryOrder.includes(c)));\n\nfor (const category of categoriesToProcess) {\n  const articles = grouped[category];\n  if (!articles || articles.length === 0) continue;\n  \n  finalMessage += `*${category}*\\n`; // åˆ†é¡æ¨™é¡Œ\n  \n  // é€™è£¡æ”¹å›é¡¯ç¤ºæœ€å¤š 10 å‰‡ï¼Œè®“ä½ ä¸€æ¬¡çœ‹å€‹å¤ \n  articles.slice(0, 10).forEach((art, index) => {\n    finalMessage += `${index + 1}\\. [${art.title}](${art.link}) \\- _${art.source}_\\n\\n`;\n  });\n  \n  finalMessage += `\\n`; // åˆ†é¡ä¹‹é–“ç©ºä¸€è¡Œ\n}\n\n// åªå›å‚³å–®ä¸€å€‹ Item\nreturn [{\n  json: {\n    message: finalMessage\n  }\n}];"
      },
      "name": "æ•´ç†æˆ Telegram è¨Šæ¯",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        592,
        144
      ],
      "id": "461b73c4-315e-4eb9-ab1b-f31f3346c80f"
    },
    {
      "parameters": {
        "chatId": "1823295269",
        "text": "={{ $json.message }}",
        "additionalFields": {
          "appendAttribution": false,
          "parse_mode": "Markdown"
        }
      },
      "name": "ç™¼é€ Telegram",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.1,
      "position": [
        816,
        144
      ],
      "id": "29d7f7b9-3c67-4d73-bb61-f27aaadb1292",
      "webhookId": "2e3458cb-49d8-4964-99dd-34b09f10f852",
      "credentials": {
        "telegramApi": {
          "id": "ZndJhZIs4xOnUO1J",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 11,
              "triggerAtMinute": 30
            }
          ]
        }
      },
      "name": "æ¯å¤©æ—©ä¸Š11:30è§¸ç™¼",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.1,
      "position": [
        -304,
        144
      ],
      "id": "9375db12-2284-448d-a86c-f9136cc39c5f"
    }
  ],
  "pinData": {},
  "connections": {
    "è¨­å®šæ–°èä¾†æº": {
      "main": [
        [
          {
            "node": "ä¸¦è¡ŒæŠ“å– RSS",
            "type": "main",
            "index": 0
          },
          {
            "node": "åˆä½µåŸå§‹è³‡æ–™",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "ä¸¦è¡ŒæŠ“å– RSS": {
      "main": [
        [
          {
            "node": "åˆä½µåŸå§‹è³‡æ–™",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "åˆä½µåŸå§‹è³‡æ–™": {
      "main": [
        [
          {
            "node": "æ•´ç†æˆ Telegram è¨Šæ¯",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ•´ç†æˆ Telegram è¨Šæ¯": {
      "main": [
        [
          {
            "node": "ç™¼é€ Telegram",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ¯å¤©æ—©ä¸Š11:30è§¸ç™¼": {
      "main": [
        [
          {
            "node": "è¨­å®šæ–°èä¾†æº",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": true,
    "timeSavedMode": "fixed",
    "callerPolicy": "workflowsFromSameOwner",
    "errorWorkflow": "uqCjhtQ8uT5xGIC3"
  },
  "versionId": "c7e4b68a-5f80-4f0d-a300-14d156243ca4",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "f5e7c71cf7ecee3a104a00b5c768a477de150b7aa16ac5267746701c09527830"
  },
  "id": "ChgiET2b2Kzpxw0O",
  "tags": [
    {
      "updatedAt": "2025-12-12T08:49:08.113Z",
      "createdAt": "2025-12-12T08:49:08.113Z",
      "id": "ylEXDDHNjLVuaI1z",
      "name": "Personal"
    },
    {
      "updatedAt": "2025-12-12T08:50:57.893Z",
      "createdAt": "2025-12-12T08:50:57.893Z",
      "id": "maL1cwWdp62MpO94",
      "name": "Telegram"
    }
  ]
}